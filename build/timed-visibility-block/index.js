(()=>{"use strict";const e=window.wp.blocks,i=window.wp.i18n,t=window.wp.blockEditor,l=window.wp.components,s=window.wp.date,o=window.wp.element,n=window.wp.primitives,a=window.ReactJSXRuntime,r=(0,a.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)(n.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})});function c({label:e,currentDate:t,isCompact:n,onChange:c,placeholderText:d=(0,i.__)("Pick Date & Time","timed-visibility-block"),...b}){const[m,_]=(0,o.useState)(!1),v=(0,s.getSettings)(),h=/a(?!\\)/i.test(v.formats.time.toLowerCase().replace(/\\\\/g,"").split("").reverse().join("")),p={startOfWeek:v.l10n.startOfWeek,currentDate:t,__nextRemoveHelpButton:!0,__nextRemoveResetButton:!0,is12Hour:h,onChange:c,...b},u=n?v.formats.time||"g:i a":v.formats.datetime||"F j, Y g:i a",y=t?(0,s.format)(u,t):d;return(0,a.jsxs)(l.BaseControl,{label:e||"",help:(0,i.__)("The time shown is based on the site's timezone. Please choose the date and time accordingly.","timed-visibility-block"),__nextHasNoMarginBottom:!0,children:[(0,a.jsxs)("div",{className:"tvb-date-time__field",children:[(0,a.jsx)(l.Button,{className:"tvb-date-time__button",title:(0,i.__)("Pick date/time","timed-visibility-block"),onClick:()=>_(!0),variant:"link",children:(0,a.jsx)("span",{children:y})}),t&&(0,a.jsx)(l.Button,{icon:r,className:"tvb-date-time__clear-button",title:(0,i.__)("Clear date/time","timed-visibility-block"),onClick:()=>{c(null),_(!1)},size:"small"})]}),m&&(0,a.jsxs)(l.Popover,{className:"tvb-date-time__popover",focusOnMount:!0,onClose:()=>_(!1),placement:"left-start",offset:36,expandOnMobile:!0,children:[(0,a.jsxs)("div",{className:"tvb-date-time__popover-header",children:[(0,a.jsx)("h2",{children:e}),(0,a.jsx)(l.Button,{label:(0,i.__)("Close","timed-visibility-block"),onClick:()=>_(!1),icon:r,size:"small"})]}),(0,a.jsx)(l.DateTimePicker,{...p})]})]})}const d=JSON.parse('{"UU":"timed-vblck/timed-visibility-block"}');(0,e.registerBlockType)(d.UU,{edit:function({attributes:e,setAttributes:s}){const{visibleFrom:o,visibleUntil:n,timeOnly:r,fallbackMessage:d,visibilityType:b}=e,m=(0,t.useBlockProps)(),_=(0,t.useInnerBlocksProps)(m);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.InspectorControls,{children:[(0,a.jsxs)(l.PanelBody,{title:(0,i.__)("Schedule","timed-visibility-block"),initialOpen:!0,children:[(0,a.jsx)(l.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,i.__)("Daily Schedule (Time Only)","timed-visibility-block"),help:(0,i.__)("Enable to set a recurring daily schedule without specific dates","timed-visibility-block"),checked:r,onChange:e=>{s({timeOnly:e})}}),(0,a.jsx)(c,{label:(0,i.__)("Visible From","timed-visibility-block"),currentDate:o,isCompact:r,onChange:e=>s({visibleFrom:e})}),(0,a.jsx)(c,{label:(0,i.__)("Visible Until","timed-visibility-block"),currentDate:n,isCompact:r,onChange:e=>s({visibleUntil:e}),placeholderText:o?(0,i.__)("Forever","timed-visibility-block"):void 0}),n&&o>n&&(0,a.jsx)(l.Notice,{status:"warning",isDismissible:!1,children:(0,i.__)("The visibility end time must be later than the start time to work correctly.","timed-visibility-block")}),r&&o&&!n&&(0,a.jsx)(l.Notice,{status:"warning",isDismissible:!1,children:(0,i.__)('To ensure proper functionality, either specify an end time or disable "Daily Schedule (Time Only)".',"timed-visibility-block")})]}),(0,a.jsxs)(l.PanelBody,{title:(0,i.__)("Display Behavior","timed-visibility-block"),initialOpen:!0,children:[(0,a.jsx)(l.SelectControl,{label:(0,i.__)("Visibility Type","timed-visibility-block"),help:(0,i.__)("Choose whether to show or hide content during your specified time period","timed-visibility-block"),value:b,options:[{label:(0,i.__)("Display Content","timed-visibility-block"),value:"show"},{label:(0,i.__)("Hide Content","timed-visibility-block"),value:"hide"}],onChange:e=>s({visibilityType:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,a.jsx)(l.TextControl,{label:(0,i.__)("Alternative Text","timed-visibility-block"),help:(0,i.__)("Control what visitors see when your content isn't live â€” leave it blank to show nothing at all.","timed-visibility-block"),value:d,onChange:e=>s({fallbackMessage:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})]})]}),(0,a.jsx)("div",{..._})]})},save:function(){const e=t.useBlockProps.save(),i=t.useInnerBlocksProps.save(e);return(0,a.jsx)("div",{...i})}})})();